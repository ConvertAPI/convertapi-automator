<!DOCTYPE html>
<html>
<head>
  <title>ConvertAPI Workflows</title>
  <link rel="stylesheet" href="../../assets/css/materialize.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="">
  <nav>
    <div class="nav-wrapper">
      <div class="brand-logo center">
        <img src="../../assets/icons/png/icon-small.png" width="25"/>
          ConvertAPI Workflows
      </a>
    </div>
    <ul class="right">
      <li><a href="#"><i class="material-icons">settings</i></a></li>
      <li><a href="#"><i class="material-icons">more_vert</i></a></li>
    </ul>
  </nav>
  <div class="container">
    <div class="row">
      <div class="col s12 m12 l6 xl4">
        <div class="card js-workflow">
          <div class="card-image cursor-pointer js-select-files" data-path="C:\\Documents\\">
            <img src="../../assets/img/drag.png">
          </div>
          <div class="card-content">
            <p>DOCX to PDF workflow</p>
          </div>
          <div class="card-action">
            <a data-path="C:\\Documents\\split\\test" class="js-open-folder waves-effect waves-light btn strong" href="#"><i class="material-icons tiny left">folder_open</i>Open results</a>
            <a class="waves-effect waves-light btn" href="#"><i class="material-icons tiny center">create</i><strong></strong></a>
            <a class="waves-effect waves-light btn" href="#"><i class="material-icons tiny center">delete</i><strong></strong></a>
          </div>
        </div>
      </div>
      <div class="col s12 m12 l6 xl4">
        <div class="card js-workflow">
          <div class="card-image js-select-files" data-path="C:\\Documents\\">
            <img src="../../assets/img/drag.png">
          </div>
          <div class="card-content">
            <p>DOCX to PDF workflow</p>
          </div>
          <div class="card-action">
            <a data-path="C:\\Documents\\split\\test" class="js-open-folder waves-effect waves-light btn strong" href="#"><i class="material-icons tiny left">folder_open</i>Open results</a>
            <a class="waves-effect waves-light btn" href="#"><i class="material-icons tiny center">create</i><strong></strong></a>
            <a class="waves-effect waves-light btn" href="#"><i class="material-icons tiny center">delete</i><strong></strong></a>
          </div>
        </div>
      </div>
    </div>
    <a class="btn-floating btn-large waves-effect waves-light right"><i class="material-icons">add</i></a>
  </div>
  <script>
    const electron = require('electron');
    const {ipcRenderer, shell} = electron;
    let workflows = document.querySelectorAll('.js-workflow');
    for(var i = 0; i < workflows.length; i++) {
      workflows[i].querySelector('.js-open-folder').addEventListener('click', (e) => { shell.showItemInFolder(e.target.getAttribute('data-path')); });
      workflows[i].querySelector('.js-select-files').addEventListener('click', (e) => { ipcRenderer.send('files:add', e.target.getAttribute('data-path')) });
    }
    ipcRenderer.on('blur:off', () => {
      console.log('blur off')
      document.body.className = `${document.body.className} authenticated`;
    });
    ipcRenderer.on('blur:on', () => {
      console.log('blur')
      document.body.className = 'blur';
    });
  </script>
</body>
</html>